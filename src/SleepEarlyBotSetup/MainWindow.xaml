<Window x:Class="SleepEarlyBotSetup.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SleepEarlyBot Setup"
        Width="860"
        Height="620"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0"
                   Text="SleepEarlyBot Setup"
                   FontSize="18"
                   FontWeight="SemiBold" />

        <TabControl Grid.Row="1" Margin="0,12,0,0">
            <TabItem Header="Deploy">
                <Grid Margin="12">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <WrapPanel Grid.Row="0" Margin="0,0,0,10">
                        <Button x:Name="InstallBtn"
                                Content="Install (Per-user)"
                                Width="150"
                                Height="32"
                                Margin="0,0,8,0"
                                Click="OnInstallClicked"/>
                        <Button x:Name="UninstallBtn"
                                Content="Uninstall"
                                Width="110"
                                Height="32"
                                Margin="0,0,8,0"
                                Click="OnUninstallClicked"/>
                        <Button x:Name="RunNowBtn"
                                Content="Run Agent Now"
                                Width="130"
                                Height="32"
                                Margin="0,0,8,0"
                                Click="OnRunNowClicked"/>
                        <Button x:Name="OpenDataBtn"
                                Content="Open Data Folder"
                                Width="140"
                                Height="32"
                                Click="OnOpenDataFolderClicked"/>
                    </WrapPanel>

                    <TextBlock Grid.Row="1"
                               Text="Status / Output:"
                               FontWeight="SemiBold"
                               Margin="0,0,0,6"/>

                    <TextBox Grid.Row="2"
                             x:Name="DeployLog"
                             IsReadOnly="True"
                             TextWrapping="Wrap"
                             VerticalScrollBarVisibility="Auto"/>
                </Grid>
            </TabItem>

            <TabItem Header="Configuration">
                <Grid Margin="12">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="260"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.ColumnSpan="2"
                                       Text="Times"
                                       FontWeight="SemiBold"
                                       Margin="0,0,0,8"/>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Daily deadline (HH:mm)" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="1" Grid.Column="1" x:Name="DailyDeadlineText" Margin="0,4,0,4"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Restricted start (HH:mm)" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="2" Grid.Column="1" x:Name="RestrictedStartText" Margin="0,4,0,4"/>

                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Restricted end (HH:mm)" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="3" Grid.Column="1" x:Name="RestrictedEndText" Margin="0,4,0,4"/>

                            <TextBlock Grid.Row="4" Grid.ColumnSpan="2"
                                       Text="Warnings (comma-separated minutes)"
                                       FontWeight="SemiBold"
                                       Margin="0,14,0,8"/>

                            <TextBlock Grid.Row="5" Grid.Column="0" Text="Normal warnings" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="5" Grid.Column="1" x:Name="WarningsNormalText" Margin="0,4,0,4"/>

                            <TextBlock Grid.Row="6" Grid.Column="0" Text="After override warnings" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="6" Grid.Column="1" x:Name="WarningsOverrideText" Margin="0,4,0,4"/>

                            <TextBlock Grid.Row="7" Grid.ColumnSpan="2"
                                       Text="Override policy"
                                       FontWeight="SemiBold"
                                       Margin="0,14,0,8"/>

                            <TextBlock Grid.Row="8" Grid.Column="0" Text="Override enabled" VerticalAlignment="Center"/>
                            <CheckBox Grid.Row="8" Grid.Column="1" x:Name="OverrideEnabledCheck" Margin="0,4,0,4"/>

                            <TextBlock Grid.Row="9" Grid.Column="0" Text="Override extension (minutes)" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="9" Grid.Column="1" x:Name="OverrideExtensionText" Margin="0,4,0,4"/>

                            <TextBlock Grid.Row="10" Grid.Column="0" Text="Reason min length" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="10" Grid.Column="1" x:Name="ReasonMinLengthText" Margin="0,4,0,4"/>

                            <TextBlock Grid.Row="11" Grid.Column="0" Text="Commitment phrase" VerticalAlignment="Top"/>
                            <TextBox Grid.Row="11" Grid.Column="1" x:Name="CommitmentPhraseText" Margin="0,4,0,4"
                                     Height="70" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto"/>

                            <TextBlock Grid.Row="12" Grid.ColumnSpan="2"
                                       Text="Weekly quota + popup UI"
                                       FontWeight="SemiBold"
                                       Margin="0,14,0,8"/>

                            <StackPanel Grid.Row="13" Grid.ColumnSpan="2">
                                <WrapPanel Margin="0,4,0,4">
                                    <TextBlock Text="Weekly override limit enabled" Width="260" VerticalAlignment="Center"/>
                                    <CheckBox x:Name="WeeklyLimitEnabledCheck"/>
                                </WrapPanel>
                                <WrapPanel Margin="0,4,0,4">
                                    <TextBlock Text="Max overrides per week" Width="260" VerticalAlignment="Center"/>
                                    <TextBox x:Name="MaxOverridesPerWeekText" Width="120"/>
                                </WrapPanel>
                                <WrapPanel Margin="0,4,0,4">
                                    <TextBlock Text="Popup width (px)" Width="260" VerticalAlignment="Center"/>
                                    <TextBox x:Name="PopupWidthText" Width="120"/>
                                </WrapPanel>
                                <WrapPanel Margin="0,4,0,4">
                                    <TextBlock Text="Auto-close after (seconds)" Width="260" VerticalAlignment="Center"/>
                                    <TextBox x:Name="AutoCloseSecondsText" Width="120"/>
                                </WrapPanel>
                            </StackPanel>
                        </Grid>
                    </ScrollViewer>

                    <TextBlock Grid.Row="1" Margin="0,10,0,6"
                               x:Name="ConfigGuardText"
                               TextWrapping="Wrap"/>

                    <DockPanel Grid.Row="2" LastChildFill="False" Margin="0,8,0,0">
                        <Button x:Name="ReloadConfigBtn"
                                Content="Reload"
                                Width="90"
                                Height="30"
                                DockPanel.Dock="Left"
                                Click="OnReloadConfigClicked"/>

                        <Button x:Name="SaveChangesBtn"
                                Content="Save Changes"
                                Width="130"
                                Height="30"
                                Margin="8,0,0,0"
                                DockPanel.Dock="Right"
                                Click="OnSaveChangesClicked"/>
                        <Button x:Name="ApplyNowBtn"
                                Content="Apply Now"
                                Width="110"
                                Height="30"
                                DockPanel.Dock="Right"
                                Click="OnApplyNowClicked"/>
                    </DockPanel>
                </Grid>
            </TabItem>
        </TabControl>

        <TextBlock Grid.Row="2"
                   Margin="0,12,0,0"
                   Foreground="Gray"
                   Text="Config is stored under %LocalAppData%\\SleepEarlyBot. Agent is installed to %LocalAppData%\\SleepEarlyBot\\app and runs via the Scheduled Task: SleepEarlyBot Agent."/>
    </Grid>
</Window>

